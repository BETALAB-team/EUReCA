<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>eureca_building.systems &mdash; EUReCA 0.2 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            EUReCA
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../readme_link.html">EUReCA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">Source code</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">EUReCA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">eureca_building.systems</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for eureca_building.systems</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">File with HVAC systems classes</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Enrico Prataviera&quot;</span>
<span class="n">__credits__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Enrico Prataviera&quot;</span><span class="p">]</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;MIT&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;0.1&quot;</span>
<span class="n">__maintainer__</span> <span class="o">=</span> <span class="s2">&quot;Enrico Prataviera&quot;</span>


<span class="kn">import</span> <span class="nn">abc</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">eureca_building.systems_info</span> <span class="kn">import</span> <span class="n">systems_info</span>
<span class="kn">from</span> <span class="nn">eureca_building.fluids_properties</span> <span class="kn">import</span> <span class="n">fuels_pci</span>
<span class="kn">from</span> <span class="nn">eureca_building.config</span> <span class="kn">import</span> <span class="n">CONFIG</span>

<span class="c1"># including Systems info from system_info json</span>
<span class="k">global</span> <span class="n">systems_info_dict</span>
<span class="n">systems_info_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">systems_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">systems_info_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;Type&quot;</span> <span class="ow">in</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">systems_info_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="System"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.System">[docs]</a><span class="k">class</span> <span class="nc">System</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">abc</span><span class="o">.</span><span class="n">ABCMeta</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Father class for HVAC systems classes</span>
<span class="sd">    Defines an interface to force inherited class to implement mandatory methods</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">gas_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">electric_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">wood_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">oil_consumption</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="System.__subclasshook__"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.System.__subclasshook__">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__subclasshook__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">is</span> <span class="n">System</span><span class="p">:</span>
            <span class="n">attrs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">dir</span><span class="p">(</span><span class="n">C</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">__abstractmethods__</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">attrs</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="bp">NotImplemented</span></div>

<div class="viewcode-block" id="System.__init__"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.System.__init__">[docs]</a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># raise NotImplementedError(</span>
        <span class="c1">#     f&quot;&quot;&quot;</span>
        <span class="c1"># When creating a class for systems __init__, set, and solve methods must be created and overwritten</span>
        <span class="c1">#     &quot;&quot;&quot;</span>
        <span class="c1">#     )</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="System.set_system_capacity"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.System.set_system_capacity">[docs]</a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">set_system_capacity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># raise NotImplementedError(</span>
        <span class="c1">#     f&quot;&quot;&quot;</span>
        <span class="c1"># When creating a class for systems __init__, set, and solve methods must be created and overwritten</span>
        <span class="c1">#     &quot;&quot;&quot;</span>
        <span class="c1">#     )</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="System.solve_system"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.System.solve_system">[docs]</a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">solve_system</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># raise NotImplementedError(</span>
        <span class="c1">#     f&quot;&quot;&quot;</span>
        <span class="c1"># When creating a class for systems __init__, set, and solve methods must be created and overwritten</span>
        <span class="c1">#     &quot;&quot;&quot;</span>
        <span class="c1">#     )</span>
        <span class="k">pass</span></div>

    <span class="nd">@property</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">electric_consumption</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">gas_consumption</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">wood_consumption</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">oil_consumption</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">system_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_system_type</span>

    <span class="nd">@system_type</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">system_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;HVAC System, system type not string: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_system_type</span> <span class="o">=</span> <span class="n">value</span></div>


<span class="c1"># %%---------------------------------------------------------------------------------------------------</span>
<span class="c1"># %% IdealLoad class</span>

<div class="viewcode-block" id="IdealLoad"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.IdealLoad">[docs]</a><span class="k">class</span> <span class="nc">IdealLoad</span><span class="p">(</span><span class="n">System</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Class IdealLoad is for the ideal  zone balance. This class passes all methods.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">gas_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">electric_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">wood_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">oil_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">coal_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">DH_consumption</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="IdealLoad.__init__"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.IdealLoad.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;IdealLoad init method. No input needed</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args</span>
<span class="sd">        kwargs</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span> <span class="o">=</span> <span class="mf">0.65</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;1C&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">),</span>
            <span class="s2">&quot;2C&quot;</span> <span class="p">:</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative IW</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative AW</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span>       <span class="c1"># Convective</span>
        <span class="p">}</span></div>

<div class="viewcode-block" id="IdealLoad.set_system_capacity"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.IdealLoad.set_system_capacity">[docs]</a>    <span class="k">def</span> <span class="nf">set_system_capacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design_power</span><span class="p">,</span> <span class="n">weather</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set system capacity method.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        design_power : float</span>
<span class="sd">            Design Heating power  [W]</span>
<span class="sd">        weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="IdealLoad.solve_system"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.IdealLoad.solve_system">[docs]</a>    <span class="k">def</span> <span class="nf">solve_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heat_flow</span><span class="p">,</span> <span class="n">weather</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">T_int</span><span class="p">,</span> <span class="n">RH_int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Solve the system power for the time step</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        heat_flow : float</span>
<span class="sd">            required power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        t : int</span>
<span class="sd">            Simulation time step</span>
<span class="sd">        T_int : float</span>
<span class="sd">            Zone temperature [°]</span>
<span class="sd">        RH_int : float</span>
<span class="sd">            Zone relative humidity [%]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div></div>


<span class="c1"># %%---------------------------------------------------------------------------------------------------</span>
<span class="c1"># %% CondensingBoiler class</span>
<div class="viewcode-block" id="CondensingBoiler"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.CondensingBoiler">[docs]</a><span class="k">class</span> <span class="nc">CondensingBoiler</span><span class="p">(</span><span class="n">System</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Class CondensingBoiler. This method considers a generic Condensing Boiler as the heating system</span>
<span class="sd">    of the entire building following UNI-TS 11300:2 - 2008</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">gas_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">electric_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">wood_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">oil_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">coal_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">DH_consumption</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="CondensingBoiler.__init__"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.CondensingBoiler.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;init method. Set some attributes for the method are initialized</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args</span>
<span class="sd">        kwargs</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Input Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">system_type</span> <span class="o">=</span> <span class="s2">&quot;CondensingBoiler&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_gn_test_Pn</span> <span class="o">=</span> <span class="mi">70</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_gn_test_Pint</span> <span class="o">=</span> <span class="mi">35</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_a_test</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PCI_natural_gas</span> <span class="o">=</span> <span class="n">fuels_pci</span><span class="p">[</span><span class="s2">&quot;Natural Gas&quot;</span><span class="p">]</span>  <span class="c1"># Wh/Nm3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;CondensingBoiler&quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;1C&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">),</span>
            <span class="s2">&quot;2C&quot;</span> <span class="p">:</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative IW</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative AW</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span>       <span class="c1"># Convective</span>
        <span class="p">}</span></div>

        <span class="c1"># Vectors initialization</span>
        <span class="c1"># self.phi_gn_i_Px = np.zeros(l)  # [kW]</span>
        <span class="c1"># self.W_aux_Px = np.zeros(l)  # [kW]</span>
        <span class="c1"># self.phi_gn_i_Px_1 = np.zeros(l)  # [kW]</span>
        <span class="c1"># self.phi_gn_i_Px_2 = np.zeros(l)  # [kW]</span>

<div class="viewcode-block" id="CondensingBoiler.set_system_capacity"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.CondensingBoiler.set_system_capacity">[docs]</a>    <span class="k">def</span> <span class="nf">set_system_capacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design_power</span><span class="p">,</span> <span class="n">weather</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Sets system design power</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        design_power : float</span>
<span class="sd">            Design Heating power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Choise of system size based on estimated nominal Power</span>
        <span class="n">Size_0</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span> <span class="o">=</span> <span class="n">design_power</span>  <span class="c1"># [W]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Size_0</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">Size_0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;P_int [%]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span>  <span class="c1"># [W]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;location [str]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;tech_room&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_a_gn</span> <span class="o">=</span> <span class="mi">15</span>  <span class="c1"># [°C]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;location [str]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;internal&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_a_gn</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># [°C]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;location [str]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;external&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_a_gn</span> <span class="o">=</span> <span class="n">weather</span><span class="o">.</span><span class="n">general_data</span><span class="p">[</span><span class="s1">&#39;average_out_air_db_temperature_heating_season&#39;</span><span class="p">]</span>  <span class="c1"># [°C]</span>

        <span class="c1"># Minimum Condensing Boiler efficiency check based on Directive</span>
        <span class="c1"># 92/42/CEE&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span> <span class="o">&gt;</span> <span class="mi">400000</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">design_power_check</span> <span class="o">=</span> <span class="mi">400000</span>  <span class="c1"># [W]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">design_power_check</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pn_min</span> <span class="o">=</span> <span class="p">(</span><span class="mi">91</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power_check</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>  <span class="c1"># [%]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pint_min</span> <span class="o">=</span> <span class="p">(</span><span class="mi">97</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power_check</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>  <span class="c1"># [%]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;eta_nom [%]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pn_min</span> <span class="ow">or</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;eta_int [%]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pint_min</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Warning: Condensing Boiler efficiencies are lower than minimum&#39;</span><span class="p">)</span>

        <span class="c1"># No load losses estimation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_I_P0</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power_check</span> <span class="o">*</span> <span class="mf">4.8</span> <span class="o">/</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power_check</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.35</span><span class="p">))</span>  <span class="c1"># [W]</span>

        <span class="c1"># Auxiliary power input data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pn</span> <span class="o">=</span> <span class="p">(</span><span class="mi">45</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.48</span><span class="p">)</span> <span class="c1"># [W]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pint</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.48</span><span class="p">)</span> <span class="c1"># [W]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_P0</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">)</span>  <span class="c1"># [W]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span></div>

<div class="viewcode-block" id="CondensingBoiler.solve_system"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.CondensingBoiler.solve_system">[docs]</a>    <span class="k">def</span> <span class="nf">solve_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heat_flow</span><span class="p">,</span> <span class="n">weather</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">T_int</span><span class="p">,</span> <span class="n">RH_int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;This method allows to calculate Condensing Boiler power and losses following</span>
<span class="sd">         the Standard UNI-TS 11300:2 - 2008</span>

<span class="sd">         Parameters</span>
<span class="sd">         ----------</span>
<span class="sd">         heat_flow : float</span>
<span class="sd">             required power  [W]</span>
<span class="sd">         Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">             WeatherFile object</span>
<span class="sd">         t : int</span>
<span class="sd">             Simulation time step</span>
<span class="sd">         T_int : float</span>
<span class="sd">             Zone temperature [°]</span>
<span class="sd">         RH_int : float</span>
<span class="sd">             Zone relative humidity [%]</span>
<span class="sd">         &#39;&#39;&#39;</span>
        <span class="c1"># Corrected efficiency and losses at nominal power</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pn_cor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;eta_nom [%]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">+</span> \
                             <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;f_cor_Pn [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span>
                                         <span class="bp">self</span><span class="o">.</span><span class="n">theta_gn_test_Pn</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;T_gn_w [°C]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Pn_cor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pn_cor</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pn_cor</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span>  <span class="c1"># [W]</span>

        <span class="c1"># Corrected efficiency and losses at intermadiate power</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pint_cor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;eta_int [%]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">+</span> \
                               <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;f_cor_Pint [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">theta_gn_test_Pint</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;T_gn_Pint [°C]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Pint_cor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pint_cor</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pint_cor</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span>  <span class="c1"># [W]</span>

        <span class="c1"># Corrected no-load losses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_P0_cor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_I_P0</span> <span class="o">*</span> <span class="p">(</span>
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;T_gn_w [°C]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta_a_gn</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_gn_test_Pn</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta_a_test</span><span class="p">))</span> <span class="o">**</span> <span class="mf">1.25</span>

        <span class="c1"># Total losses at current power</span>
        <span class="k">if</span> <span class="n">heat_flow</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px_1</span> <span class="o">=</span> <span class="p">((</span><span class="n">heat_flow</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(((</span><span class="bp">self</span><span class="o">.</span><span class="n">Pint</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Pn_cor</span><span class="o">/</span><span class="mi">1000</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_P0_cor</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span>
                                                                    <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Pint_cor</span><span class="o">/</span><span class="mi">1000</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_P0_cor</span><span class="o">/</span><span class="mi">1000</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span>
                                                                   <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span><span class="o">/</span><span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span><span class="o">/</span><span class="mi">1000</span><span class="p">)))</span><span class="o">*</span><span class="mi">1000</span> <span class="c1">#[W]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px_2</span> <span class="o">=</span> <span class="n">heat_flow</span><span class="o">/</span><span class="mi">1000</span> <span class="o">*</span> <span class="p">((((</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Pint_cor</span><span class="o">/</span><span class="mi">1000</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_P0_cor</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span>
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pint</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Pn_cor</span><span class="o">/</span><span class="mi">1000</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_P0_cor</span><span class="o">/</span><span class="mi">1000</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span>
                                                            <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span><span class="o">/</span><span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span><span class="o">/</span><span class="mi">1000</span><span class="p">)))</span> <span class="o">*</span> <span class="mi">1000</span> <span class="c1"># [W]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px_1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px_2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_P0_cor</span>  <span class="c1"># [W]</span>

        <span class="c1"># Auxiliary power estimation</span>
        <span class="k">if</span> <span class="n">heat_flow</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Px</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">=</span> <span class="n">heat_flow</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Px</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_P0</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pint</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_P0</span><span class="p">)</span>  <span class="c1"># [W]</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Px</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pint</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pn</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pint</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
                            <span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span><span class="p">)</span>  <span class="c1"># [W]</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Px</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pint</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pn</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pint</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
                            <span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span><span class="p">)</span>  <span class="c1"># [W]</span>

        <span class="n">total_energy</span> <span class="o">=</span> <span class="n">heat_flow</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gas_consumption</span> <span class="o">=</span> <span class="n">total_energy</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span> <span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">PCI_natural_gas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Px</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span></div></div>

<span class="c1"># %%---------------------------------------------------------------------------------------------------</span>
<span class="c1"># %% TraditionalBoiler class</span>
<div class="viewcode-block" id="TraditionalBoiler"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.TraditionalBoiler">[docs]</a><span class="k">class</span> <span class="nc">TraditionalBoiler</span><span class="p">(</span><span class="n">System</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Class TraditionalBoiler. This class considers a generic Traditional Boiler as the heating system</span>
<span class="sd">    of the entire building following UNI-TS 11300:2 - 2008</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">gas_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">electric_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">wood_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">oil_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">coal_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">DH_consumption</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="TraditionalBoiler.__init__"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.TraditionalBoiler.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;init method. Set some attributes for the method</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args</span>
<span class="sd">        kwargs</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Input Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">system_type</span> <span class="o">=</span> <span class="s2">&quot;TraditionalBoiler&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_gn_test_Pn</span> <span class="o">=</span> <span class="mi">70</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_gn_test_Pint</span> <span class="o">=</span> <span class="mi">50</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_a_test</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">PCI_natural_gas</span> <span class="o">=</span> <span class="n">fuels_pci</span><span class="p">[</span><span class="s2">&quot;Natural Gas&quot;</span><span class="p">]</span>  <span class="c1"># [Wh/Nm3]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;TraditionalBoiler&quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;1C&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">),</span>
            <span class="s2">&quot;2C&quot;</span> <span class="p">:</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative IW</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative AW</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span>       <span class="c1"># Convective</span>
        <span class="p">}</span></div>

        <span class="c1"># Vectors initialization</span>
        <span class="c1"># self.phi_gn_i_Px = np.zeros(l)  # [kW]</span>
        <span class="c1"># self.W_aux_Px = np.zeros(l)  # [kW]</span>
        <span class="c1"># self.phi_gn_i_Px_1 = np.zeros(l)  # [kW]</span>
        <span class="c1"># self.phi_gn_i_Px_2 = np.zeros(l)  # [kW]</span>

<div class="viewcode-block" id="TraditionalBoiler.set_system_capacity"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.TraditionalBoiler.set_system_capacity">[docs]</a>    <span class="k">def</span> <span class="nf">set_system_capacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design_power</span><span class="p">,</span> <span class="n">weather</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Sets system design power</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        design_power : float</span>
<span class="sd">            Design Heating power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        &#39;&#39;&#39;</span>


        <span class="c1"># Choise of system size based on estimated nominal Power</span>
        <span class="n">Size_0</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span> <span class="o">=</span> <span class="n">design_power</span>  <span class="c1"># [W]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Size_0</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">Size_0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;P_int [%]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span>  <span class="c1"># [W]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;location [str]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;tech_room&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_a_gn</span> <span class="o">=</span> <span class="mi">15</span>  <span class="c1"># [°C]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;location [str]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;internal&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_a_gn</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># [°C]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;location [str]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;external&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_a_gn</span> <span class="o">=</span> <span class="n">weather</span><span class="o">.</span><span class="n">general_data</span><span class="p">[</span><span class="s1">&#39;average_out_air_db_temperature_heating_season&#39;</span><span class="p">]</span>  <span class="c1"># [°C]</span>

        <span class="c1"># Minimum Traditional Boiler efficiency check based on Directive</span>
        <span class="c1"># 92/42/CEE&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span> <span class="o">&gt;</span> <span class="mi">400000</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">design_power_check</span> <span class="o">=</span> <span class="mi">400000</span>  <span class="c1"># [W]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">design_power_check</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pn_min</span> <span class="o">=</span> <span class="p">(</span><span class="mi">84</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power_check</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>  <span class="c1"># [%]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pint_min</span> <span class="o">=</span> <span class="p">(</span><span class="mi">80</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power_check</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">))</span>  <span class="c1"># [%]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;eta_nom [%]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pn_min</span> <span class="ow">or</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;eta_int [%]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pint_min</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Warning: Traditional Boiler efficiencies are lower than minimum&#39;</span><span class="p">)</span>

        <span class="c1"># No load losses estimation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_I_P0</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power_check</span> <span class="o">/</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">*</span> <span class="mf">8.5</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power_check</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.4</span><span class="p">))</span>  <span class="c1"># [W]</span>

        <span class="c1"># Auxiliary power input data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pn</span> <span class="o">=</span> <span class="p">(</span><span class="mi">45</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.48</span><span class="p">)</span>   <span class="c1"># [W]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pint</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.48</span><span class="p">)</span>  <span class="c1"># [W]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_P0</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">)</span>   <span class="c1"># [W]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span></div>

<div class="viewcode-block" id="TraditionalBoiler.solve_system"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.TraditionalBoiler.solve_system">[docs]</a>    <span class="k">def</span> <span class="nf">solve_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heat_flow</span><span class="p">,</span> <span class="n">weather</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">T_int</span><span class="p">,</span> <span class="n">RH_int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;This method allows to calculate Traditional Boiler losses following</span>
<span class="sd">        the Standard UNI-TS 11300:2 - 2008</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        heat_flow : float</span>
<span class="sd">            required power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        t : int</span>
<span class="sd">            Simulation time step</span>
<span class="sd">        T_int : float</span>
<span class="sd">            Zone temperature [°]</span>
<span class="sd">        RH_int : float</span>
<span class="sd">            Zone relative humidity [%]</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1"># Corrected efficiency and losses at nominal power</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pn_cor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;eta_nom [%]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">+</span> \
                             <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;f_cor_Pn [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span>
                                         <span class="bp">self</span><span class="o">.</span><span class="n">theta_gn_test_Pn</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;T_gn_w [°C]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Pn_cor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pn_cor</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pn_cor</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span>  <span class="c1"># [W]</span>

        <span class="c1"># Corrected efficiency and losses at intermadiate power</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pint_cor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;eta_int [%]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">+</span> \
                               <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;f_cor_Pint [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">theta_gn_test_Pint</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;T_gn_Pint [°C]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Pint_cor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pint_cor</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_gn_Pint_cor</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span>  <span class="c1"># [W]</span>

        <span class="c1"># Corrected no-load losses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_P0_cor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_I_P0</span> <span class="o">*</span> <span class="p">(</span>
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;T_gn_w [°C]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta_a_gn</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta_gn_test_Pn</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta_a_test</span><span class="p">))</span> <span class="o">**</span> <span class="mf">1.25</span>

        <span class="c1"># Total losses at current power</span>
        <span class="k">if</span> <span class="n">heat_flow</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px_1</span> <span class="o">=</span> <span class="p">((</span><span class="n">heat_flow</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
                    <span class="p">(</span>
                            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Pint</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Pn_cor</span><span class="o">/</span><span class="mi">1000</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_P0_cor</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span>
                                                                    <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Pint_cor</span><span class="o">/</span><span class="mi">1000</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_P0_cor</span><span class="o">/</span><span class="mi">1000</span><span class="p">))</span>
                    <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span><span class="o">/</span><span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span><span class="o">/</span><span class="mi">1000</span><span class="p">)))</span><span class="o">*</span><span class="mi">1000</span> <span class="c1">#[W]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px_2</span> <span class="o">=</span> <span class="n">heat_flow</span><span class="o">/</span><span class="mi">1000</span> <span class="o">*</span> \
                                 <span class="p">((</span>
                                          <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Pint_cor</span><span class="o">/</span><span class="mi">1000</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_P0_cor</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span>
                                          <span class="o">-</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">Pint</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Pn_cor</span><span class="o">/</span><span class="mi">1000</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_P0_cor</span><span class="o">/</span><span class="mi">1000</span><span class="p">))</span>
                                  <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span><span class="o">/</span><span class="mi">1000</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pint</span><span class="o">/</span><span class="mi">1000</span><span class="p">)))</span> <span class="o">*</span> <span class="mi">1000</span> <span class="c1"># [W]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px_1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px_2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_P0_cor</span>  <span class="c1"># [W]</span>

        <span class="c1"># Auxiliary power estimation</span>
        <span class="k">if</span> <span class="n">heat_flow</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Px</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">=</span> <span class="n">heat_flow</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Px</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_P0</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pint</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_P0</span><span class="p">)</span>  <span class="c1"># [W]</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Px</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pint</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pn</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pint</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
                            <span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span><span class="p">)</span>  <span class="c1"># [W]</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Px</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pint</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">FC_Px</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pn</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Pint</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
                            <span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">FC_Pint</span><span class="p">)</span>  <span class="c1"># [W]</span>


        <span class="n">total_energy</span> <span class="o">=</span> <span class="n">heat_flow</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_gn_i_Px</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gas_consumption</span> <span class="o">=</span> <span class="n">total_energy</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span> <span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">PCI_natural_gas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_Px</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span></div></div>

<span class="c1"># %%---------------------------------------------------------------------------------------------------</span>
<span class="c1"># %% SplitAirCooler class</span>

<div class="viewcode-block" id="SplitAirCooler"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.SplitAirCooler">[docs]</a><span class="k">class</span> <span class="nc">SplitAirCooler</span><span class="p">(</span><span class="n">System</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;SplitAirCooler class. This class considers a generic Split Air Conditioner as the cooling system</span>
<span class="sd">    of the entire building following UNI-TS 11300:3 - 2010</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">gas_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">electric_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">wood_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">oil_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">coal_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">DH_consumption</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="SplitAirCooler.__init__"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.SplitAirCooler.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;init method. Set some attributes for the method</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args</span>
<span class="sd">        kwargs</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input data type</span>

        <span class="c1"># The quality control is implemented in the System class.. Here is not necessary</span>

        <span class="c1"># Input Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">C_system_type</span> <span class="o">=</span> <span class="s2">&quot;SplitAirCooler&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_rif_100</span> <span class="o">=</span> <span class="mi">35</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_rif_75</span> <span class="o">=</span> <span class="mi">30</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_rif_50</span> <span class="o">=</span> <span class="mi">25</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_rif_25</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_int_rif</span> <span class="o">=</span> <span class="mi">27</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_gn</span> <span class="o">=</span> <span class="mf">0.04</span>  <span class="c1"># [kW/kW_cond]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Conversion_fac</span> <span class="o">=</span> <span class="mf">2.17</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;SplitAirCooler&quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span> <span class="o">=</span> <span class="mf">1.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;1C&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">),</span>
            <span class="s2">&quot;2C&quot;</span> <span class="p">:</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative IW</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative AW</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span>       <span class="c1"># Convective</span>
        <span class="p">}</span></div>

        <span class="c1"># Vectors initialization</span>
        <span class="c1"># self.W_el = np.zeros(l)  # [kWe]</span>
        <span class="c1"># self.W_aux = np.zeros(l)  # [kWe]</span>
        <span class="c1"># self.H_waste = np.zeros(l)  # [kW]</span>
        <span class="c1"># self.eta_mm = np.zeros(l)</span>
        <span class="c1"># self.eta_1 = np.zeros(l)</span>

<div class="viewcode-block" id="SplitAirCooler.set_system_capacity"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.SplitAirCooler.set_system_capacity">[docs]</a>    <span class="k">def</span> <span class="nf">set_system_capacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design_power</span><span class="p">,</span> <span class="n">weather</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Choice of system size based on estimated nominal Power</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        design_power : float</span>
<span class="sd">            Design Heating power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">Size_0</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">design_power</span>  <span class="c1"># [W]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Size_0</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">Size_0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">design_power</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Q_max</span> <span class="o">=</span> <span class="n">design_power</span>  <span class="c1"># [W]</span>

        <span class="c1"># EER curve in case of Air-to-Air unit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_100</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;EER_100 [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_75</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;EER_75 [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_50</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;EER_50 [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;EER_25 [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_20</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">*</span> <span class="mf">0.94</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_15</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">*</span> <span class="mf">0.85</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_10</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">*</span> <span class="mf">0.73</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">*</span> <span class="mf">0.50</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">*</span> <span class="mf">0.26</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">*</span> <span class="mf">0.14</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">EER_100</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_75</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_50</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_20</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_15</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_5</span><span class="p">,</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">EER_2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_100</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.634</span><span class="p">,</span> <span class="mf">1.457</span><span class="p">,</span> <span class="mf">1.281</span><span class="p">,</span> <span class="mf">1.105</span><span class="p">,</span> <span class="mf">0.928</span><span class="p">,</span> <span class="mf">0.807</span><span class="p">,</span> <span class="mf">0.685</span><span class="p">],</span> \
                                     <span class="p">[</span><span class="mf">1.720</span><span class="p">,</span> <span class="mf">1.518</span><span class="p">,</span> <span class="mf">1.327</span><span class="p">,</span> <span class="mf">1.148</span><span class="p">,</span> <span class="mf">0.979</span><span class="p">,</span> <span class="mf">0.856</span><span class="p">,</span> <span class="mf">0.736</span><span class="p">],</span> \
                                     <span class="p">[</span><span class="mf">1.756</span><span class="p">,</span> <span class="mf">1.534</span><span class="p">,</span> <span class="mf">1.332</span><span class="p">,</span> <span class="mf">1.155</span><span class="p">,</span> <span class="mf">1.000</span><span class="p">,</span> <span class="mf">0.871</span><span class="p">,</span> <span class="mf">0.750</span><span class="p">],</span> \
                                     <span class="p">[</span><span class="mf">1.782</span><span class="p">,</span> <span class="mf">1.569</span><span class="p">,</span> <span class="mf">1.370</span><span class="p">,</span> <span class="mf">1.187</span><span class="p">,</span> <span class="mf">1.018</span><span class="p">,</span> <span class="mf">0.890</span><span class="p">,</span> <span class="mf">0.767</span><span class="p">],</span> \
                                     <span class="p">[</span><span class="mf">1.834</span><span class="p">,</span> <span class="mf">1.639</span><span class="p">,</span> <span class="mf">1.444</span><span class="p">,</span> <span class="mf">1.249</span><span class="p">,</span> <span class="mf">1.054</span><span class="p">,</span> <span class="mf">0.928</span><span class="p">,</span> <span class="mf">0.802</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_75</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.457</span><span class="p">,</span> <span class="mf">1.281</span><span class="p">,</span> <span class="mf">1.105</span><span class="p">,</span> <span class="mf">0.928</span><span class="p">,</span> <span class="mf">0.807</span><span class="p">,</span> <span class="mf">0.685</span><span class="p">,</span> <span class="mf">0.585</span><span class="p">],</span> \
                                    <span class="p">[</span><span class="mf">1.518</span><span class="p">,</span> <span class="mf">1.327</span><span class="p">,</span> <span class="mf">1.148</span><span class="p">,</span> <span class="mf">0.979</span><span class="p">,</span> <span class="mf">0.856</span><span class="p">,</span> <span class="mf">0.736</span><span class="p">,</span> <span class="mf">0.636</span><span class="p">],</span> \
                                    <span class="p">[</span><span class="mf">1.534</span><span class="p">,</span> <span class="mf">1.332</span><span class="p">,</span> <span class="mf">1.155</span><span class="p">,</span> <span class="mf">1.000</span><span class="p">,</span> <span class="mf">0.871</span><span class="p">,</span> <span class="mf">0.750</span><span class="p">,</span> <span class="mf">0.650</span><span class="p">],</span> \
                                    <span class="p">[</span><span class="mf">1.569</span><span class="p">,</span> <span class="mf">1.370</span><span class="p">,</span> <span class="mf">1.187</span><span class="p">,</span> <span class="mf">1.018</span><span class="p">,</span> <span class="mf">0.890</span><span class="p">,</span> <span class="mf">0.767</span><span class="p">,</span> <span class="mf">0.667</span><span class="p">],</span> \
                                    <span class="p">[</span><span class="mf">1.639</span><span class="p">,</span> <span class="mf">1.444</span><span class="p">,</span> <span class="mf">1.249</span><span class="p">,</span> <span class="mf">1.054</span><span class="p">,</span> <span class="mf">0.928</span><span class="p">,</span> <span class="mf">0.802</span><span class="p">,</span> <span class="mf">0.700</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_50</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.281</span><span class="p">,</span> <span class="mf">1.105</span><span class="p">,</span> <span class="mf">0.928</span><span class="p">,</span> <span class="mf">0.807</span><span class="p">,</span> <span class="mf">0.685</span><span class="p">,</span> <span class="mf">0.585</span><span class="p">,</span> <span class="mf">0.505</span><span class="p">],</span> \
                                    <span class="p">[</span><span class="mf">1.327</span><span class="p">,</span> <span class="mf">1.148</span><span class="p">,</span> <span class="mf">0.979</span><span class="p">,</span> <span class="mf">0.856</span><span class="p">,</span> <span class="mf">0.736</span><span class="p">,</span> <span class="mf">0.636</span><span class="p">,</span> <span class="mf">0.556</span><span class="p">],</span> \
                                    <span class="p">[</span><span class="mf">1.332</span><span class="p">,</span> <span class="mf">1.155</span><span class="p">,</span> <span class="mf">1.000</span><span class="p">,</span> <span class="mf">0.871</span><span class="p">,</span> <span class="mf">0.750</span><span class="p">,</span> <span class="mf">0.650</span><span class="p">,</span> <span class="mf">0.672</span><span class="p">],</span> \
                                    <span class="p">[</span><span class="mf">1.370</span><span class="p">,</span> <span class="mf">1.187</span><span class="p">,</span> <span class="mf">1.018</span><span class="p">,</span> <span class="mf">0.890</span><span class="p">,</span> <span class="mf">0.767</span><span class="p">,</span> <span class="mf">0.667</span><span class="p">,</span> <span class="mf">0.587</span><span class="p">],</span> \
                                    <span class="p">[</span><span class="mf">1.444</span><span class="p">,</span> <span class="mf">1.249</span><span class="p">,</span> <span class="mf">1.054</span><span class="p">,</span> <span class="mf">0.928</span><span class="p">,</span> <span class="mf">0.802</span><span class="p">,</span> <span class="mf">0.700</span><span class="p">,</span> <span class="mf">0.698</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_25</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1.062</span><span class="p">,</span> <span class="mf">0.962</span><span class="p">,</span> <span class="mf">0.871</span><span class="p">,</span> <span class="mf">0.788</span><span class="p">,</span> <span class="mf">0.714</span><span class="p">,</span> <span class="mf">0.646</span><span class="p">,</span> <span class="mf">0.585</span><span class="p">],</span> \
                                    <span class="p">[</span><span class="mf">1.083</span><span class="p">,</span> <span class="mf">0.981</span><span class="p">,</span> <span class="mf">0.888</span><span class="p">,</span> <span class="mf">0.804</span><span class="p">,</span> <span class="mf">0.728</span><span class="p">,</span> <span class="mf">0.659</span><span class="p">,</span> <span class="mf">0.596</span><span class="p">],</span> \
                                    <span class="p">[</span><span class="mf">1.105</span><span class="p">,</span> <span class="mf">1.000</span><span class="p">,</span> <span class="mf">0.905</span><span class="p">,</span> <span class="mf">0.820</span><span class="p">,</span> <span class="mf">0.742</span><span class="p">,</span> <span class="mf">0.672</span><span class="p">,</span> <span class="mf">0.608</span><span class="p">],</span> \
                                    <span class="p">[</span><span class="mf">1.126</span><span class="p">,</span> <span class="mf">1.020</span><span class="p">,</span> <span class="mf">0.923</span><span class="p">,</span> <span class="mf">0.836</span><span class="p">,</span> <span class="mf">0.757</span><span class="p">,</span> <span class="mf">0.685</span><span class="p">,</span> <span class="mf">0.620</span><span class="p">],</span> \
                                    <span class="p">[</span><span class="mf">1.149</span><span class="p">,</span> <span class="mf">1.040</span><span class="p">,</span> <span class="mf">0.941</span><span class="p">,</span> <span class="mf">0.852</span><span class="p">,</span> <span class="mf">0.771</span><span class="p">,</span> <span class="mf">0.698</span><span class="p">,</span> <span class="mf">0.632</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_25</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_100</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_75</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_50</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_25</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pcfx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">45</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pcfy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">22</span><span class="p">])</span></div>

<div class="viewcode-block" id="SplitAirCooler.solve_system"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.SplitAirCooler.solve_system">[docs]</a>    <span class="k">def</span> <span class="nf">solve_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heat_flow</span><span class="p">,</span> <span class="n">weather</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">T_int</span><span class="p">,</span> <span class="n">RH_int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;This method allows to calculate Split Air Cooler electrical power</span>
<span class="sd">        following the Standard UNI-TS 11300:3 - 2010</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        heat_flow : float</span>
<span class="sd">            required power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        t : int</span>
<span class="sd">            Simulation time step</span>
<span class="sd">        T_int : float</span>
<span class="sd">            Zone temperature [°]</span>
<span class="sd">        RH_int : float</span>
<span class="sd">            Zone relative humidity [%]</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input data type</span>

        <span class="c1"># The quality control is implemented in the System class.. Here is not necessary</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">=</span> <span class="n">weather</span><span class="o">.</span><span class="n">hourly_data</span><span class="p">[</span><span class="s2">&quot;out_air_db_temperature&quot;</span><span class="p">][</span><span class="n">t</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">&lt;=</span> <span class="mi">15</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">=</span> <span class="mf">15.1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">&gt;</span> <span class="mi">45</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">=</span> <span class="mi">45</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_F</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">])</span>

        <span class="c1"># Wet bulb temperature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_wb</span> <span class="o">=</span> <span class="n">T_int</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="mf">0.151977</span> <span class="o">*</span> <span class="p">(</span><span class="n">RH_int</span> <span class="o">+</span> <span class="mf">8.313659</span><span class="p">)</span> <span class="o">**</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">))</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="n">T_int</span> <span class="o">+</span> <span class="n">RH_int</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span>
            <span class="n">RH_int</span> <span class="o">-</span> <span class="mf">1.676331</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.00391838</span> <span class="o">*</span> <span class="p">(</span><span class="n">RH_int</span><span class="p">)</span> <span class="o">**</span> <span class="p">(</span><span class="mi">3</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="mf">0.023101</span> <span class="o">*</span> <span class="n">RH_int</span><span class="p">)</span> <span class="o">-</span> <span class="mf">4.686035</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_wb</span> <span class="o">&lt;=</span> <span class="mi">16</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">T_wb</span> <span class="o">=</span> <span class="mf">16.1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_wb</span> <span class="o">&gt;</span> <span class="mi">22</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">T_wb</span> <span class="o">=</span> <span class="mi">22</span>

        <span class="c1"># Load Factor and EER in real conditions estimation</span>
        <span class="k">if</span> <span class="n">heat_flow</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">W_el</span> <span class="o">=</span> <span class="mf">0.</span>  <span class="c1"># [We]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">H_waste</span> <span class="o">=</span> <span class="mf">0.</span>  <span class="c1"># [W]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">W_aux</span> <span class="o">=</span> <span class="mf">0.</span>  <span class="c1"># [We]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">=</span> <span class="n">heat_flow</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Q_max</span><span class="p">)</span>
            <span class="n">xa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">xb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">EER</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">-</span> <span class="n">xb</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xa</span> <span class="o">-</span> <span class="n">xb</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">-</span> <span class="n">xa</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xa</span> <span class="o">-</span> <span class="n">xb</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">xa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">xb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">xa</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">&lt;=</span> <span class="n">xb</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">EER</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">-</span> <span class="n">xb</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xa</span> <span class="o">-</span> <span class="n">xb</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">-</span> <span class="n">xa</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xa</span> <span class="o">-</span> <span class="n">xb</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">EER</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_100</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fx</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">n_prosp_a</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">n_prosp_b</span> <span class="o">=</span> <span class="n">i</span>
                <span class="n">fxa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">fxb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">fxa</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">&lt;=</span> <span class="n">fxb</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
                        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_F</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">-</span> <span class="n">fxb</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">fxa</span> <span class="o">-</span> <span class="n">fxb</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C</span><span class="p">[</span><span class="n">n_prosp_a</span><span class="p">][</span><span class="n">n</span><span class="p">][</span><span class="n">m</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">-</span> <span class="n">fxa</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">fxa</span> <span class="o">-</span> <span class="n">fxb</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C</span><span class="p">[</span><span class="n">n_prosp_b</span><span class="p">][</span><span class="n">n</span><span class="p">][</span><span class="n">m</span><span class="p">]</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_F</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_100</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
                <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcfy</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
                <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcfy</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">y1</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_wb</span> <span class="o">&lt;=</span> <span class="n">y2</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
                        <span class="n">x1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcfx</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
                        <span class="n">x2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcfx</span><span class="p">[</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">x1</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">&lt;=</span> <span class="n">x2</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">eta_1</span><span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">((</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_F</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_wb</span><span class="p">)</span> <span class="o">+</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_F</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">y2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_wb</span><span class="p">)</span> <span class="o">+</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_F</span><span class="p">[</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">m</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_wb</span> <span class="o">-</span> <span class="n">y1</span><span class="p">)</span> <span class="o">+</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_F</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="n">m</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_wb</span> <span class="o">-</span> <span class="n">y1</span><span class="p">))</span>

            <span class="c1"># Electrical power required in real conditions</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eta_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">W_el</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">heat_flow</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_mm</span> <span class="c1"># [We]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">H_waste</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">heat_flow</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_el</span> <span class="c1"># [W]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">W_aux</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_gn</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">H_waste</span><span class="p">)</span>  <span class="c1"># [We]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">W_el</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux</span><span class="p">)</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span></div></div>


<span class="c1"># %%---------------------------------------------------------------------------------------------------</span>
<span class="c1"># %% ChillerAirtoWater class</span>

<div class="viewcode-block" id="ChillerAirtoWater"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.ChillerAirtoWater">[docs]</a><span class="k">class</span> <span class="nc">ChillerAirtoWater</span><span class="p">(</span><span class="n">System</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;ChillerAirtoWater class. This method considers a generic Air-to-water Chiller as the cooling system</span>
<span class="sd">    of the entire building following UNI-TS 11300:3 - 2010</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">gas_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">electric_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">wood_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">oil_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">coal_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">DH_consumption</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="ChillerAirtoWater.__init__"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.ChillerAirtoWater.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;init method. Set some attributes for the method</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args</span>
<span class="sd">        kwargs</span>
<span class="sd">        &#39;&#39;&#39;</span>


        <span class="c1"># Check input data type</span>

        <span class="c1"># The quality control is implemented in the System class.. Here is not necessary</span>

        <span class="c1"># Input Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">C_system_type</span> <span class="o">=</span> <span class="s2">&quot;ChillerAirtoWater&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_rif_100</span> <span class="o">=</span> <span class="mi">35</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_rif_75</span> <span class="o">=</span> <span class="mi">30</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_rif_50</span> <span class="o">=</span> <span class="mi">25</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_rif_25</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_w_out_rif</span> <span class="o">=</span> <span class="mi">7</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_gn</span> <span class="o">=</span> <span class="mf">0.04</span>  <span class="c1"># [kW/kW_cond]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Conversion_fac</span> <span class="o">=</span> <span class="mf">2.17</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;ChillerAirtoWater&quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span> <span class="o">=</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;1C&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">),</span>
            <span class="s2">&quot;2C&quot;</span> <span class="p">:</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative IW</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative AW</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span>       <span class="c1"># Convective</span>
        <span class="p">}</span></div>

        <span class="c1"># Vectors initialization</span>
        <span class="c1"># self.W_el = np.zeros(l)  # [kWe]</span>
        <span class="c1"># self.W_aux = np.zeros(l)  # [kWe]</span>
        <span class="c1"># self.H_waste = np.zeros(l)  # [kW]</span>
        <span class="c1"># self.eta_mm = np.zeros(l)</span>
        <span class="c1"># self.eta_1 = np.zeros(l)</span>

<div class="viewcode-block" id="ChillerAirtoWater.set_system_capacity"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.ChillerAirtoWater.set_system_capacity">[docs]</a>    <span class="k">def</span> <span class="nf">set_system_capacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design_power</span><span class="p">,</span> <span class="n">weather</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Choice of system size based on estimated nominal Power</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        design_power : float</span>
<span class="sd">            Design Heating power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input data type</span>

        <span class="c1"># The quality control is implemented in the System class.. Here is not necessary</span>

        <span class="c1"># Choise of system size based on estimated nominal Power</span>
        <span class="n">Size_0</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Pnom</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">design_power</span><span class="p">)</span>  <span class="c1"># [W]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Size_0</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pnom</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">Size_0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pnom</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Q_max</span> <span class="o">=</span> <span class="n">design_power</span>  <span class="c1"># [W]</span>

        <span class="c1"># EER curve in case of Air-to-Water chiller</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_100</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;EER_100 [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_75</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;EER_75 [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_50</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;EER_50 [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;EER_25 [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_20</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">*</span> <span class="mf">0.95</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_15</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">*</span> <span class="mf">0.94</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_10</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">*</span> <span class="mf">0.87</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_5</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">*</span> <span class="mf">0.71</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">*</span> <span class="mf">0.46</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">EER_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span> <span class="o">*</span> <span class="mf">0.29</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">EER_100</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_75</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_50</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_25</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_20</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_15</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_5</span><span class="p">,</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">EER_2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span>

        <span class="c1"># Assumption: T_water_out = 7°C and delta(T) = 5°C</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_100</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.756</span><span class="p">,</span> <span class="mf">1.534</span><span class="p">,</span> <span class="mf">1.332</span><span class="p">,</span> <span class="mf">1.155</span><span class="p">,</span> <span class="mf">1.000</span><span class="p">,</span> <span class="mf">0.871</span><span class="p">,</span> <span class="mf">0.750</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_75</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.534</span><span class="p">,</span> <span class="mf">1.332</span><span class="p">,</span> <span class="mf">1.155</span><span class="p">,</span> <span class="mf">1.000</span><span class="p">,</span> <span class="mf">0.871</span><span class="p">,</span> <span class="mf">0.750</span><span class="p">,</span> <span class="mf">0.650</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_50</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.332</span><span class="p">,</span> <span class="mf">1.155</span><span class="p">,</span> <span class="mf">1.000</span><span class="p">,</span> <span class="mf">0.871</span><span class="p">,</span> <span class="mf">0.750</span><span class="p">,</span> <span class="mf">0.650</span><span class="p">,</span> <span class="mf">0.570</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_25</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.155</span><span class="p">,</span> <span class="mf">1.000</span><span class="p">,</span> <span class="mf">0.871</span><span class="p">,</span> <span class="mf">0.750</span><span class="p">,</span> <span class="mf">0.650</span><span class="p">,</span> <span class="mf">0.570</span><span class="p">,</span> <span class="mf">0.500</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_25</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_100</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_75</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_50</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_25</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pcfx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">45</span><span class="p">])</span></div>

<div class="viewcode-block" id="ChillerAirtoWater.solve_system"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.ChillerAirtoWater.solve_system">[docs]</a>    <span class="k">def</span> <span class="nf">solve_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heat_flow</span><span class="p">,</span> <span class="n">weather</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">T_int</span><span class="p">,</span> <span class="n">RH_int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;This method allows to calculates Air to Water Chiller electrical power</span>
<span class="sd">        following the Standard UNI-TS 11300:3 - 2010</span>


<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        heat_flow : float</span>
<span class="sd">            required power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        t : int</span>
<span class="sd">            Simulation time step</span>
<span class="sd">        T_int : float</span>
<span class="sd">            Zone temperature [°]</span>
<span class="sd">        RH_int : float</span>
<span class="sd">            Zone relative humidity [%]</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input data type</span>

        <span class="c1"># The quality control is implemented in the System class.. Here is not necessary</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">=</span> <span class="n">weather</span><span class="o">.</span><span class="n">hourly_data</span><span class="p">[</span><span class="s2">&quot;out_air_db_temperature&quot;</span><span class="p">][</span><span class="n">t</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">&lt;=</span> <span class="mi">15</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">=</span> <span class="mf">15.1</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">&gt;</span> <span class="mi">45</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">=</span> <span class="mi">45</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_F</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>

        <span class="c1"># Load Factor and EER in real conditions estimation</span>
        <span class="k">if</span> <span class="n">heat_flow</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">W_el</span> <span class="o">=</span> <span class="mf">0.</span>  <span class="c1"># [We]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">H_waste</span> <span class="o">=</span> <span class="mf">0.</span>  <span class="c1"># [W]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">W_aux</span> <span class="o">=</span> <span class="mf">0.</span>  <span class="c1"># [We]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">=</span> <span class="n">heat_flow</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Q_max</span><span class="p">)</span>
            <span class="n">xa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">xb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">EER</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">-</span> <span class="n">xb</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xa</span> <span class="o">-</span> <span class="n">xb</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">-</span> <span class="n">xa</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xa</span> <span class="o">-</span> <span class="n">xb</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">xa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">xb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">xa</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">&lt;=</span> <span class="n">xb</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">EER</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">-</span> <span class="n">xb</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xa</span> <span class="o">-</span> <span class="n">xb</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">-</span> <span class="n">xa</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">xa</span> <span class="o">-</span> <span class="n">xb</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">EER</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_100</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fx</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">fxa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">fxb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">fxa</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">&lt;=</span> <span class="n">fxb</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_F</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">-</span> <span class="n">fxb</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">fxa</span> <span class="o">-</span> <span class="n">fxb</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="n">m</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">-</span> <span class="n">fxa</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
                                    <span class="n">fxa</span> <span class="o">-</span> <span class="n">fxb</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">m</span><span class="p">]</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_F</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_100</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
                <span class="n">x1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcfx</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
                <span class="n">x2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pcfx</span><span class="p">[</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">x1</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">&lt;=</span> <span class="n">x2</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">eta_1</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_F</span><span class="p">[</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">-</span> <span class="n">x2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">prosp_C_F</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>

            <span class="c1"># Electrical power required in real conditions</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">eta_mm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">W_el</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">heat_flow</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">eta_mm</span> <span class="c1"># [We]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">H_waste</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">heat_flow</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_el</span> <span class="c1"># [W]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">W_aux</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_gn</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">H_waste</span><span class="p">)</span>  <span class="c1"># [We]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">W_el</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">W_aux</span><span class="p">)</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span></div></div>

<span class="c1"># %%---------------------------------------------------------------------------------------------------</span>
<span class="c1"># %% SplitAirConditioner class</span>
<div class="viewcode-block" id="SplitAirConditioner"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.SplitAirConditioner">[docs]</a><span class="k">class</span> <span class="nc">SplitAirConditioner</span><span class="p">(</span><span class="n">System</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;SplitAirConditioner class</span>

<span class="sd">    This method considers a generic Split Air Conditioner as the cooling system</span>
<span class="sd">    of the entire building following two documents of literature</span>

<span class="sd">    Berend Jan Christiaan van Putten, Nariman Mahdavi, Julio H. Braslavsky,</span>
<span class="sd">    An Analytical Model for Demand Response of Variable-Speed Air Conditioners,</span>
<span class="sd">    IFAC-PapersOnLine,</span>
<span class="sd">    Volume 51, Issue 28,</span>
<span class="sd">    2018,</span>
<span class="sd">    Pages 426-431,</span>
<span class="sd">    ISSN 2405-8963,</span>
<span class="sd">    https://doi.org/10.1016/j.ifacol.2018.11.740.</span>
<span class="sd">    (https://www.sciencedirect.com/science/article/pii/S2405896318334608)</span>

<span class="sd">    https://ieeexplore.ieee.org/document/7515217</span>
<span class="sd">    N. Mahdavi, J. H. Braslavsky and C. Perfumo,</span>
<span class="sd">    &quot;Mapping the Effect of Ambient Temperature on the Power Demand of Populations of Air Conditioners,&quot;</span>
<span class="sd">    in IEEE Transactions on Smart Grid, vol. 9, no. 3, pp. 1540-1550, May 2018,</span>
<span class="sd">    doi: 10.1109/TSG.2016.2592522.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">gas_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">electric_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">wood_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">oil_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">coal_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">DH_consumption</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="SplitAirConditioner.__init__"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.SplitAirConditioner.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;init method. Set some attributes for the method</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args</span>
<span class="sd">        kwargs</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input data type</span>

        <span class="c1"># The quality control is implemented in the System class.. Here is not necessary</span>

        <span class="c1"># Input Data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">system_type</span> <span class="o">=</span> <span class="s2">&quot;SplitAirConditioner&quot;</span>  <span class="c1"># system_type è una stringa</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_rif</span> <span class="o">=</span> <span class="mi">35</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">T_int_rif</span> <span class="o">=</span> <span class="mi">27</span>  <span class="c1"># [°C]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">W_aux_gn</span> <span class="o">=</span> <span class="mf">0.04</span>  <span class="c1"># [kW/kW_cond]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;SplitAirConditioner&quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span> <span class="o">=</span> <span class="mf">1.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;1C&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">),</span>
            <span class="s2">&quot;2C&quot;</span> <span class="p">:</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative IW</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative AW</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span>       <span class="c1"># Convective</span>
        <span class="p">}</span></div>

        <span class="c1"># self.W_el = np.zeros(l)  # [kWe]</span>
        <span class="c1"># self.W_aux = np.zeros(l)  # [kWe]</span>
        <span class="c1"># self.H_waste = np.zeros(l)  # [kW]</span>
        <span class="c1"># self.eta_mm = np.zeros(l)</span>
        <span class="c1"># self.EER = np.zeros(l)</span>
        <span class="c1"># self.F = np.zeros(l)</span>

<div class="viewcode-block" id="SplitAirConditioner.set_system_capacity"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.SplitAirConditioner.set_system_capacity">[docs]</a>    <span class="k">def</span> <span class="nf">set_system_capacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design_power</span><span class="p">,</span> <span class="n">weather</span><span class="p">):</span>  <span class="c1"># da modificare dentro il file excel di impianti</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Choice of system size based on estimated nominal Power for air conditioner WITHOUT inverter</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        design_power : float</span>
<span class="sd">            Design Heating power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input data type</span>

        <span class="c1"># The quality control is implemented in the System class.. Here is not necessary</span>

        <span class="n">Size_0</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Pnom</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">design_power</span><span class="p">)</span>  <span class="c1"># [W]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Size_0</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pnom</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">Size_0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>  <span class="o">*</span> <span class="mi">1000</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pnom</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;Size [kW]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Q_max</span> <span class="o">=</span> <span class="n">design_power</span>  <span class="c1"># [W]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;inverter [str]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;no&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">EER_targa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;EER_medio [-]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;inverter [str]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span>  <span class="c1"># Choise of system size based on estimated nominal Power for air conditioner WITH inverter</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mf">11.2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.363</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="mf">2.6</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="mf">0.829</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">=</span> <span class="mf">6.9</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.159</span></div>

<div class="viewcode-block" id="SplitAirConditioner.solve_system"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.SplitAirConditioner.solve_system">[docs]</a>    <span class="k">def</span> <span class="nf">solve_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heat_flow</span><span class="p">,</span> <span class="n">weather</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">T_int</span><span class="p">,</span> <span class="n">RH_int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;This method allows to calculate from literature: Split Air Cooler condensing power</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        heat_flow : float</span>
<span class="sd">            required power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        t : int</span>
<span class="sd">            Simulation time step</span>
<span class="sd">        T_int : float</span>
<span class="sd">            Zone temperature [°]</span>
<span class="sd">        RH_int : float</span>
<span class="sd">            Zone relative humidity [%]</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># Check input data type</span>

        <span class="c1"># The quality control is implemented in the System class.. Here is not necessary</span>
        <span class="n">T_ext</span> <span class="o">=</span> <span class="n">weather</span><span class="o">.</span><span class="n">hourly_data</span><span class="p">[</span><span class="s2">&quot;out_air_db_temperature&quot;</span><span class="p">][</span><span class="n">t</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">heat_flow</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">W_el</span> <span class="o">=</span> <span class="mf">0.</span>  <span class="c1"># [We]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">H_waste</span> <span class="o">=</span> <span class="mf">0.</span>  <span class="c1"># [W]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">F</span> <span class="o">=</span> <span class="n">heat_flow</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Q_max</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;inverter [str]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;no&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">=</span> <span class="n">T_ext</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">&lt;=</span> <span class="mi">20</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">=</span> <span class="mf">20.1</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">&gt;</span> <span class="mi">35</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">=</span> <span class="mi">35</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">EER</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.14</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">T_ext_solve</span> <span class="o">-</span> <span class="mi">35</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER_targa</span>

            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_info</span><span class="p">[</span><span class="s1">&#39;inverter [str]&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;yes&#39;</span><span class="p">:</span>  <span class="c1"># Choise of system size based on estimated nominal Power for air conditioner WITH inverter&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Pnom_cond</span> <span class="o">=</span> <span class="mi">7000</span>  <span class="c1"># [W] P_nom conditioner</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">number_cond</span> <span class="o">=</span> <span class="n">heat_flow</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">Pnom_cond</span>  <span class="c1"># number of air conditioners suppose in each thermal zone</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">EER</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">*</span> <span class="n">T_ext</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">*</span> <span class="n">T_ext</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">*</span> <span class="p">(</span>
                            <span class="n">heat_flow</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_cond</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">e</span> <span class="o">*</span> <span class="n">T_ext</span> <span class="o">*</span> <span class="p">(</span><span class="n">heat_flow</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_cond</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">*</span> <span class="p">(</span>
                                          <span class="n">heat_flow</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">number_cond</span>  <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">H_waste</span> <span class="o">=</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">heat_flow</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER</span><span class="p">))</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">EER</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">W_el</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">H_waste</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">heat_flow</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">W_el</span><span class="p">)</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span></div></div>

<div class="viewcode-block" id="Heating_EN15316"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.Heating_EN15316">[docs]</a><span class="k">class</span> <span class="nc">Heating_EN15316</span><span class="p">(</span><span class="n">System</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Class Heating_EN15316. This method considers a generic heating system as the heating system</span>
<span class="sd">    of the entire building following EN 15316.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">gas_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">electric_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">wood_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">oil_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">coal_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">DH_consumption</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="Heating_EN15316.__init__"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.Heating_EN15316.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;init method. Set some attributes are set</span>
<span class="sd">        The heating_system_key label must be passed as kwargs. Example:</span>
<span class="sd">        Heating_EN15316(heating_system_key = &quot;Traditional Gas Boiler, Single, Low Temp Radiator&quot;)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args : list</span>
<span class="sd">            list of optional arguments</span>
<span class="sd">        kwargs : dict</span>
<span class="sd">            kwargs must include {heating_system_key : string_of_heating_system}</span>

<span class="sd">        &#39;&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">system_type</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;heating_system_key&quot;</span><span class="p">]</span>
        <span class="n">info_heating</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;heating_system_key&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">generation_type</span> <span class="o">=</span> <span class="n">info_heating</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span> <span class="o">=</span> <span class="n">info_heating</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emitter_type</span> <span class="o">=</span> <span class="n">info_heating</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emission_control_efficiency</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;EN_15316_emission_control_heating_efficiency&quot;</span><span class="p">][</span><span class="s2">&quot;Efficiency [-]&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">emitter_type</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">distribution_efficiency</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;EN_15316_distribution_heating_efficiency&quot;</span><span class="p">][</span><span class="s2">&quot;Efficiency [-]&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;EN_15316_emission_control_heating_efficiency&quot;</span><span class="p">][</span><span class="s2">&quot;Convective fraction [-]&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">emitter_type</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="c1"># Stove</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emitter_type</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emission_control_efficiency</span> <span class="o">=</span> <span class="mf">1.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">distribution_efficiency</span> <span class="o">=</span> <span class="mf">1.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span> <span class="o">=</span> <span class="mf">0.5</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">generation_efficiency_profile</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;EN_15316_generation_heating_efficiency&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">generation_type</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generation_auxiliary_electric_load_profile</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;EN_15316_generation_heating_auxiliary_electric_load&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">generation_type</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;1C&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">),</span>
            <span class="s2">&quot;2C&quot;</span> <span class="p">:</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative IW</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative AW</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span>       <span class="c1"># Convective</span>
        <span class="p">}</span></div>

        <span class="c1"># Input Data</span>
        <span class="c1"># self.PCI_natural_gas = fuels_pci[&quot;Natural Gas&quot;]  # [Wh/Nm3]</span>

<div class="viewcode-block" id="Heating_EN15316.set_system_capacity"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.Heating_EN15316.set_system_capacity">[docs]</a>    <span class="k">def</span> <span class="nf">set_system_capacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design_power</span><span class="p">,</span> <span class="n">weather</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;&#39;Choice of system size based on estimated nominal Power</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        design_power : float</span>
<span class="sd">            Design Heating power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="n">loads</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_efficiency_profile</span><span class="o">.</span><span class="n">index</span>
        <span class="n">generation_efficiency_profile_capacity</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">float</span><span class="p">(</span><span class="n">load</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span> <span class="k">for</span> <span class="n">load</span> <span class="ow">in</span> <span class="n">loads</span><span class="p">])</span>
        <span class="n">loads</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_auxiliary_electric_load_profile</span><span class="o">.</span><span class="n">index</span>
        <span class="n">generation_auxiliary_electric_load_profile_capacity</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">float</span><span class="p">(</span><span class="n">load</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span> <span class="k">for</span> <span class="n">load</span> <span class="ow">in</span> <span class="n">loads</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">generation_efficiency</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span><span class="p">,</span> <span class="n">generation_efficiency_profile_capacity</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_efficiency_profile</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="c1"># [-]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generation_auxiliary_electric_load</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">design_power</span><span class="o">/</span><span class="mi">1000</span><span class="p">,</span> <span class="n">generation_auxiliary_electric_load_profile_capacity</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_auxiliary_electric_load_profile</span><span class="o">.</span><span class="n">values</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span> <span class="c1"># [W]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">total_efficiency</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">emission_control_efficiency</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution_efficiency</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_efficiency</span></div>

<div class="viewcode-block" id="Heating_EN15316.solve_system"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.Heating_EN15316.solve_system">[docs]</a>    <span class="k">def</span> <span class="nf">solve_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heat_flow</span><span class="p">,</span> <span class="n">weather</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">T_int</span><span class="p">,</span> <span class="n">RH_int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;This method allows to calculate the system power for each time step</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        heat_flow : float</span>
<span class="sd">            required power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        t : int</span>
<span class="sd">            Simulation time step</span>
<span class="sd">        T_int : float</span>
<span class="sd">            Zone temperature [°]</span>
<span class="sd">        RH_int : float</span>
<span class="sd">            Zone relative humidity [%]</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1"># Corrected efficiency and losses at nominal power</span>

        <span class="n">total_energy</span> <span class="o">=</span> <span class="n">heat_flow</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_efficiency</span>

        <span class="k">if</span> <span class="s2">&quot;Oil&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_type</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">oil_consumption</span> <span class="o">=</span> <span class="n">total_energy</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span> <span class="o">/</span> <span class="n">fuels_pci</span><span class="p">[</span><span class="s2">&quot;Oil&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_auxiliary_electric_load</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span>
        <span class="k">elif</span> <span class="s2">&quot;Coal&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_type</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">coal_consumption</span> <span class="o">=</span> <span class="n">total_energy</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span> <span class="o">/</span> <span class="n">fuels_pci</span><span class="p">[</span><span class="s2">&quot;Coal&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_auxiliary_electric_load</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span>
        <span class="k">elif</span> <span class="s2">&quot;District Heating&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_type</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">DH_consumption</span> <span class="o">=</span> <span class="n">total_energy</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_auxiliary_electric_load</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span>
        <span class="k">elif</span> <span class="s2">&quot;Stove&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_type</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wood_consumption</span> <span class="o">=</span> <span class="n">total_energy</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span> <span class="o">/</span> <span class="n">fuels_pci</span><span class="p">[</span><span class="s2">&quot;Wood&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_auxiliary_electric_load</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span>
        <span class="k">elif</span> <span class="s2">&quot;Heat Pump&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_type</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="n">total_energy</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span>
        <span class="k">elif</span> <span class="s2">&quot;Gas&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_type</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gas_consumption</span> <span class="o">=</span> <span class="n">total_energy</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span> <span class="o">/</span> <span class="n">fuels_pci</span><span class="p">[</span><span class="s2">&quot;Natural Gas&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_auxiliary_electric_load</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span>
        <span class="k">elif</span> <span class="s2">&quot;Electric Heater&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_type</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="n">total_energy</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_auxiliary_electric_load</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span></div></div>

<div class="viewcode-block" id="Cooling_EN15316"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.Cooling_EN15316">[docs]</a><span class="k">class</span> <span class="nc">Cooling_EN15316</span><span class="p">(</span><span class="n">System</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Class Cooling_EN15316. This method considers a generic cooling system as the heating system</span>
<span class="sd">    of the entire building following EN 15316.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">gas_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">electric_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">wood_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">oil_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">coal_consumption</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">DH_consumption</span> <span class="o">=</span> <span class="mi">0</span>

<div class="viewcode-block" id="Cooling_EN15316.__init__"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.Cooling_EN15316.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;init method. Set some attributes are set</span>
<span class="sd">        The cooling_system_key label must be passed as kwargs. Example:</span>
<span class="sd">        Cooling_EN15316(cooling_system_key = &quot;A-W chiller, Centralized, Radiant surface&quot;)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        args</span>
<span class="sd">        kwargs</span>
<span class="sd">            kwargs must include {cooling_system_key : string_of_cooling_system}</span>
<span class="sd">        &#39;&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">system_type</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;cooling_system_key&quot;</span><span class="p">]</span>
        <span class="n">info_cooling</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;cooling_system_key&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">generation_type</span> <span class="o">=</span> <span class="n">info_cooling</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span> <span class="o">=</span> <span class="n">info_cooling</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emitter_type</span> <span class="o">=</span> <span class="n">info_cooling</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emission_control_efficiency</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;EN_15316_emission_control_cooling_efficiency&quot;</span><span class="p">][</span><span class="s2">&quot;Efficiency [-]&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">emitter_type</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">distribution_efficiency</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;EN_15316_distribution_cooling_efficiency&quot;</span><span class="p">][</span><span class="s2">&quot;Efficiency [-]&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;EN_15316_emission_control_cooling_efficiency&quot;</span><span class="p">][</span><span class="s2">&quot;Convective fraction [-]&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">emitter_type</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emitter_type</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">emission_control_efficiency</span> <span class="o">=</span> <span class="mf">1.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">distribution_efficiency</span> <span class="o">=</span> <span class="mf">1.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span> <span class="o">=</span> <span class="mf">1.</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">generation_seasonal_performance_factor</span> <span class="o">=</span> <span class="n">systems_info_dict</span><span class="p">[</span><span class="s2">&quot;EN_15316_generation_cooling_seasonal_performance_factor&quot;</span><span class="p">][</span><span class="s2">&quot;SPF [-]&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">generation_type</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_efficiency</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">emission_control_efficiency</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution_efficiency</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">generation_seasonal_performance_factor</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;1C&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">),</span>
            <span class="s2">&quot;2C&quot;</span> <span class="p">:</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative IW</span>
            <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="c1"># Radiative AW</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">convective_fraction</span><span class="p">)</span>       <span class="c1"># Convective</span>
        <span class="p">}</span></div>

<div class="viewcode-block" id="Cooling_EN15316.set_system_capacity"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.Cooling_EN15316.set_system_capacity">[docs]</a>    <span class="k">def</span> <span class="nf">set_system_capacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">design_power</span><span class="p">,</span> <span class="n">weather</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;&#39;Choice of system size based on estimated nominal Power</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        design_power : float</span>
<span class="sd">            Design Heating power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Cooling_EN15316.solve_system"><a class="viewcode-back" href="../../eureca_building.html#eureca_building.systems.Cooling_EN15316.solve_system">[docs]</a>    <span class="k">def</span> <span class="nf">solve_system</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heat_flow</span><span class="p">,</span> <span class="n">weather</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">T_int</span><span class="p">,</span> <span class="n">RH_int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;This method allows to calculate the system power for each time step</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        heat_flow : float</span>
<span class="sd">            required power  [W]</span>
<span class="sd">        Weather : eureca_building.weather.WeatherFile</span>
<span class="sd">            WeatherFile object</span>
<span class="sd">        t : int</span>
<span class="sd">            Simulation time step</span>
<span class="sd">        T_int : float</span>
<span class="sd">            Zone temperature [°]</span>
<span class="sd">        RH_int : float</span>
<span class="sd">            Zone relative humidity [%]</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1"># Corrected efficiency and losses at nominal power</span>

        <span class="n">total_energy</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">heat_flow</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_efficiency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">electric_consumption</span> <span class="o">=</span> <span class="n">total_energy</span> <span class="o">/</span> <span class="n">CONFIG</span><span class="o">.</span><span class="n">ts_per_hour</span></div></div>


<span class="n">hvac_heating_systems_classes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;IdealLoad&quot;</span><span class="p">:</span><span class="n">IdealLoad</span><span class="p">,</span>
    <span class="s2">&quot;CondensingBoiler&quot;</span><span class="p">:</span><span class="n">CondensingBoiler</span><span class="p">,</span>
    <span class="s2">&quot;TraditionalBoiler&quot;</span><span class="p">:</span><span class="n">TraditionalBoiler</span><span class="p">,</span>
    <span class="s2">&quot;Traditional Gas Boiler, Centralized, Low Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Traditional Gas Boiler, Single, Low Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Traditional Gas Boiler, Centralized, High Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Traditional Gas Boiler, Single, High Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Traditional Gas Boiler, Centralized, Fan coil&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Traditional Gas Boiler, Single, Fan coil&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Traditional Gas Boiler, Centralized, Radiant surface&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Traditional Gas Boiler, Single, Radiant surface&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Condensing Gas Boiler, Centralized, Low Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Condensing Gas Boiler, Single, Low Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Condensing Gas Boiler, Centralized, High Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Condensing Gas Boiler, Single, High Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Condensing Gas Boiler, Centralized, Fan coil&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Condensing Gas Boiler, Single, Fan coil&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Condensing Gas Boiler, Centralized, Radiant surface&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Condensing Gas Boiler, Single, Radiant surface&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Oil Boiler, Centralized, High Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Oil Boiler, Single, High Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Coal Heater, Centralized, High Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Coal Heater, Single, High Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;District Heating, Centralized, High Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;District Heating, Centralized, Low Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;District Heating, Centralized, Fan coil&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;District Heating, Centralized, Radiant surface&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Stove&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;A-W Heat Pump, Centralized, Low Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;A-W Heat Pump, Single, Low Temp Radiator&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;A-W Heat Pump, Centralized, Fan coil&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;A-W Heat Pump, Single, Fan coil&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;A-W Heat Pump, Centralized, Radiant surface&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;A-W Heat Pump, Single, Radiant surface&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;Electric Heater&quot;</span><span class="p">:</span><span class="n">Heating_EN15316</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">hvac_cooling_systems_classes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;IdealLoad&quot;</span><span class="p">:</span><span class="n">IdealLoad</span><span class="p">,</span>
    <span class="s2">&quot;SplitAirCooler&quot;</span><span class="p">:</span><span class="n">SplitAirCooler</span><span class="p">,</span>
    <span class="s2">&quot;ChillerAirtoWater&quot;</span><span class="p">:</span><span class="n">ChillerAirtoWater</span><span class="p">,</span>
    <span class="s2">&quot;SplitAirConditioner&quot;</span><span class="p">:</span><span class="n">SplitAirConditioner</span><span class="p">,</span>
    <span class="s2">&quot;A-A split&quot;</span><span class="p">:</span><span class="n">Cooling_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;A-W chiller, Centralized, Fan coil&quot;</span><span class="p">:</span><span class="n">Cooling_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;A-W chiller, Centralized, Radiant surface&quot;</span><span class="p">:</span><span class="n">Cooling_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;A-W chiller, Single, Fan coil&quot;</span><span class="p">:</span><span class="n">Cooling_EN15316</span><span class="p">,</span>
    <span class="s2">&quot;A-W chiller, Single, Radiant surface&quot;</span><span class="p">:</span><span class="n">Cooling_EN15316</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Enrico Prataviera, Jacopo Vivian.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>